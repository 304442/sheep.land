<!-- Filename: /livestock.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="description" content="Browse and order our premium livestock at Sheep Land.">
    <title>Our Livestock - Sheep Land</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Noto+Kufi+Arabic:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>[x-cloak]{display:none!important}</style>
</head>
<body x-data="udh" x-init="initApp()" x-cloak>

<div x-show="load.init && !apiErr" class="load-ind" aria-live="polite">Loading application data... Please wait.</div>
<div x-show="apiErr" class="err-ind" x-text="usrApiErr || 'An unexpected error occurred. Please try again.'" role="alert" aria-live="assertive" tabindex="-1"></div>

<!-- Cart Sidebar -->
<div x-show="isCartOpen" class="cart-sidebar-overlay" @click="closeCart()" x-transition:enter="transition-opacity ease-linear duration-300" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition-opacity ease-linear duration-300" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" aria-hidden="true"></div>
<aside x-show="isCartOpen" class="cart-sidebar" x-transition:enter="transition ease-in-out duration-300 transform" x-transition:enter-start="translate-x-full" x-transition:enter-end="translate-x-0" x-transition:leave="transition ease-in-out duration-300 transform" x-transition:leave-start="translate-x-0" x-transition:leave-end="translate-x-full"
        role="dialog" aria-modal="true" aria-labelledby="cart-sidebar-title" @keydown.escape.window="closeCart()">
    <div class="cart-sidebar-header">
        <h2 id="cart-sidebar-title" class="bil-spread modal-title">
            <span class="en">Your Cart</span><span class="ar">سلتك</span>
        </h2>
        <button @click="closeCart()" class="modal-close-btn" aria-label="Close cart">
            <svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24" aria-hidden="true"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
        </button>
    </div>
    <div class="cart-sidebar-content">
        <div x-show="cartItems.length === 0" class="tc cart-empty-msg">
            <p class="bil-row"><span class="en">Your cart is currently empty.</span><span class="ar">سلتك فارغة حاليًا.</span></p>
            <button @click="closeCart(); navigateToOrScroll('udheya.html')" class="btn bp btn-sm bil-inline" style="margin-top: var(--s1);">
                <span class="en">Start Shopping</span><span class="ar">ابدأ التسوق</span>
            </button>
        </div>
        <div x-show="cartItems.length > 0">
            <template x-for="(cartItem) in cartItems" :key="cartItem.uniqueIdInCart">
                <div class="cart-item bil-row">
                    <div class="cart-item-details">
                        <p class="cart-item-name bil-spread"><span x-text="cartItem.nameENSpec"></span><span x-text="cartItem.nameARSpec"></span></p>
                        <template x-if="cartItem.product_category === 'udheya' && cartItem.udheya_details">
                            <div class="cart-item-udheya-details">
                                <p class="udheya-detail bil-row"><span class="en sm-label">Service:</span><span class="ar sm-label">الخدمة:</span> <span class="en sm-val" x-text="cartItem.udheya_details.serviceOption === 'standard_service' ? 'Standard' : 'Live Animal'"></span><span class="ar sm-val" x-text="cartItem.udheya_details.serviceOption === 'standard_service' ? 'عادية' : 'حيوان حي'"></span></p>
                                <p class="udheya-detail bil-row"><span class="en sm-label">Day:</span><span class="ar sm-label">اليوم:</span> <span class="en sm-val" x-text="getSacrificeDayText(cartItem.udheya_details.sacrificeDay, 'en')"></span><span class="ar sm-val" x-text="getSacrificeDayText(cartItem.udheya_details.sacrificeDay, 'ar')"></span></p>
                            </div>
                        </template>
                        <p class="cart-item-price bil-row"><span class="en" x-text="fmtPrice(cartItem.priceEGP) + ' x ' + cartItem.quantity"></span><span class="ar" x-text="fmtPrice(cartItem.priceEGP) + ' × ' + cartItem.quantity"></span></p>
                    </div>
                    <div class="cart-item-quantity bil-inline">
                        <button type="button" @click="updateCartQuantity(cartItem.uniqueIdInCart, cartItem.quantity - 1)" class="btn btn-sm qty-btn" :disabled="cartItem.quantity <= 1">-</button>
                        <span class="cart-qty-display" x-text="cartItem.quantity"></span>
                        <button type="button" @click="updateCartQuantity(cartItem.uniqueIdInCart, cartItem.quantity + 1)" class="btn btn-sm qty-btn" :disabled="cartItem.quantity >= cartItem.stock || (cartItem.product_category === 'udheya' && cartItem.quantity >=1 )">+</button>
                    </div>
                    <div class="cart-item-subtotal bil-row">
                         <span class="en" x-text="fmtPrice(getSubtotalForItem(cartItem))"></span>
                         <span class="ar" x-text="fmtPrice(getSubtotalForItem(cartItem))"></span>
                    </div>
                    <button @click="removeFromCart(cartItem.uniqueIdInCart)" class="cart-item-remove" :aria-label="'Remove ' + cartItem.nameENSpec + ' from cart'">×</button>
                </div>
            </template>
        </div>
    </div>
    <div class="cart-sidebar-footer" x-show="cartItems.length > 0">
        <div class="cart-total bil-row">
            <span class="en"><strong>Total:</strong> <span x-text="fmtPrice(calculateCartTotal())"></span></span>
            <span class="ar"><strong>الإجمالي:</strong> <span x-text="fmtPrice(calculateCartTotal())"></span></span>
        </div>
        <button type="button" @click="closeCart(); navigateToOrScroll('checkout.html')" class="btn bac btn-lg btn-block bil-inline" :disabled="cartItems.length === 0">
            <span class="en">Proceed to Checkout</span><span class="ar">المتابعة للدفع</span>
        </button>
    </div>
</aside>
<!-- End Cart Sidebar -->

<!-- Refund Policy Modal -->
<div x-show="isRefundModalOpen" class="modal-overlay" @click="closeRefundModal()" x-transition:enter="transition-opacity ease-linear duration-300" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition-opacity ease-linear duration-300" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" aria-hidden="true"></div>
<div x-show="isRefundModalOpen" class="modal" role="dialog" aria-modal="true" aria-labelledby="refund-modal-title" @keydown.escape.window="closeRefundModal()">
    <div class="modal-header">
        <h2 id="refund-modal-title" class="bil-spread modal-title">
            <span class="en">Refund & Cancellation Policy</span>
            <span class="ar" dir="rtl">سياسة الاسترداد والإلغاء</span>
        </h2>
        <button @click="closeRefundModal()" class="modal-close-btn" aria-label="Close refund policy">
            <svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24" aria-hidden="true"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
        </button>
    </div>
    <div class="modal-content policy-container">
         <div x-html="settings.refundPolicyHTMLContent || '<p>Loading refund policy...</p>'"></div>
    </div>
    <div class="modal-footer">
        <button @click="closeRefundModal()" class="btn bp">Close</button>
    </div>
</div>
<!-- End Refund Policy Modal -->

<!-- Order Status Modal -->
<div x-show="isOrderStatusModalOpen" class="modal-overlay" @click="closeOrderStatusModal()" x-transition:enter="transition-opacity ease-linear duration-300" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition-opacity ease-linear duration-300" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" aria-hidden="true"></div>
<div x-show="isOrderStatusModalOpen" class="modal" role="dialog" aria-modal="true" aria-labelledby="order-status-modal-title" @keydown.escape.window="closeOrderStatusModal()">
    <div class="modal-header">
        <h2 id="order-status-modal-title" class="bil-spread modal-title">
            <span class="en">Check Order Status</span><span class="ar">تحقق من حالة الطلب</span>
        </h2>
        <button @click="closeOrderStatusModal()" class="modal-close-btn" aria-label="Close order status">
            <svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24" aria-hidden="true"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
        </button>
    </div>
    <div class="modal-content">
        <form id="chk-stat-form-modal" @submit.prevent="submitStatValid()" novalidate>
            <div class="fg">
                <label for="order_id_lookup_modal" class="bil-spread lbl-req chk-stat-lbl"><span class="en">Enter Order ID *</span><span class="ar">أدخل رقم الطلب *</span></label>
                <input type="text" id="order_id_lookup_modal" class="input chk-stat-input" x-model="lookupOrderID" placeholder="e.g., A1B2C3D4E5" x-ref="lookupOrderIdInputModal" :aria-invalid="errs.lookupOrderID ? 'true' : 'false'" aria-describedby="lookupOrderIdErrModal" @input="clrErr('lookupOrderID')" aria-required="true">
                <div class="err-msg" id="lookupOrderIdErrModal" x-show="errs.lookupOrderID" x-text="errs.lookupOrderID ? (currLang === 'ar' ? errs.lookupOrderID.ar : errs.lookupOrderID.en) : ''" role="alert" aria-live="assertive"></div>
            </div>
            <div class="card-act" style="margin-top: var(--s2);">
                <button type="submit" id="btn-chk-stat-modal" class="btn bp chk-stat-btn bil-inline btn-block" :disabled="load.status">
                    <span x-show="!load.status"><span class="en">Check Status</span><span class="ar">تحقق من الحالة</span></span>
                    <span x-show="load.status" aria-live="polite"><span class="en">Checking...</span><span class="ar">جاري...</span></span>
                </button>
            </div>
        </form>
        <div id="order-stat-res-modal" class="order-stat-res" x-show="load.status || statRes || statNotFound" x-transition style="margin-top: var(--s2);">
            <div x-show="load.status && !statRes && !statNotFound" class="load-text tc" aria-live="polite">Checking...</div>
            <div x-show="statRes && !load.status">
                <h4 class="form-subh bil-spread"><span class="en">Order Details</span><span class="ar">تفاصيل الطلب</span></h4>
                <div id="stat-content-modal">
                    <div class="sum-item bil-row"><div class="en"><strong>ID:</strong> <span x-text="statRes?.orderIdTxt || ''"></span></div><div class="ar"><strong>رقم الطلب:</strong> <span x-text="statRes?.orderIdTxt || ''"></span></div></div>
                    <div class="sum-item bil-row"><div class="en"><strong>Ordered By:</strong> <span x-text="statRes?.customer_name || ''"></span></div><div class="ar"><strong>الطلب باسم:</strong> <span x-text="statRes?.customer_name || ''"></span></div></div>
                    <div class="sum-item bil-row"><div class="en"><strong>Order Status:</strong> <span class="stat-hl" x-text="statRes?.order_status || ''"></span></div><div class="ar"><strong>حالة الطلب:</strong> <span class="stat-hl" x-text="statRes?.order_status || ''"></span></div></div>
                    <div class="sum-item bil-row"><div class="en"><strong>Payment Status:</strong> <span x-text="statRes?.payment_status || ''"></span></div><div class="ar"><strong>حالة الدفع:</strong> <span x-text="statRes?.payment_status || ''"></span></div></div>
                    
                    <template x-if="statRes?.line_items && statRes.line_items.length > 0">
                        <h5 class="bil-spread modal-section-title" style="margin-top:var(--s1);"><span class="en">Items Ordered</span><span class="ar">العناصر المطلوبة</span></h5>
                        <template x-for="item in statRes.line_items" :key="item.item_key_pb"> 
                             <div class="sum-item bil-row">
                                <div class="en"><span x-text="item.name_en + (item.quantity > 1 ? ' (x' + item.quantity + ')' : '')"></span></div>
                                <div class="ar"><span x-text="item.name_ar + (item.quantity > 1 ? ' (×' + item.quantity + ')' : '')"></span></div>
                            </div>
                        </template>
                    </template>

                    <div class="sum-item bil-row"><div class="en"><strong>Order Total:</strong> <span x-text="fmtPrice(statRes?.total_amount_due_egp)"></span></div><div class="ar"><strong>إجمالي الطلب:</strong> <span x-text="fmtPrice(statRes?.total_amount_due_egp)"></span></div></div>
                    <div class="sum-item bil-row"><div class="en"><strong>Payment Method:</strong> <span x-text="statRes?.payment_method?.toUpperCase() || ''"></span></div><div class="ar"><strong>طريقة الدفع:</strong> <span x-text="statRes?.payment_method?.toUpperCase() || ''"></span></div></div>
                    <div class="sum-item bil-row" x-show="statRes && statRes.delivery_option === 'home_delivery' && statRes.delivery_address">
                        <div class="en"><strong>Delivery To:</strong> <span x-text="`${statRes?.delivery_address || ''}, ${statRes?.delivery_area_name_en || ''}`"></span></div>
                        <div class="ar"><strong>التوصيل إلى:</strong> <span x-text="`${statRes?.delivery_address || ''}، ${statRes?.delivery_area_name_ar || ''}`"></span></div>
                    </div>
                </div>
            </div>
            <div id="stat-no-res-modal" class="stat-no-res bil-row tc" x-show="statNotFound && !statRes && !load.status"><p class="en">No order found. Check ID or contact support.</p><p class="ar">لم يتم العثور على طلب. تحقق من رقم الطلب أو اتصل بالدعم.</p></div>
        </div>
    </div>
     <div class="modal-footer">
        <button @click="closeOrderStatusModal()" class="btn bp">Close</button>
    </div>
</div>
<!-- End Order Status Modal -->

<header class="site-head">
    <div class="c nav-cont">
        <a href="index.html" class="logo bil-inline" @click.prevent="isMobNavOpen = false; navigateToOrScroll('index.html')">
            <span class="en">Sheep Land</span><span class="ar">أرض الأغنام</span>
        </a>
        <nav class="nav-main nav-desk" aria-label="Main navigation">
            <ul class="nav-list">
                <template x-if="settings.enable_udheya_section">
                    <li>
                        <a href="udheya.html" class="nav-link bil-inline" :class="{'active-nav': isCurrentPage('udheya.html')}" @click.prevent="isMobNavOpen = false; navigateToOrScroll('udheya.html')">
                            <span class="en">Udheya</span><span class="ar">الأضحية</span>
                        </a>
                    </li>
                </template>
                <template x-if="settings.enable_livestock_section">
                    <li><a href="livestock.html" class="nav-link bil-inline" :class="{'active-nav': isCurrentPage('livestock.html')}" @click.prevent="isMobNavOpen = false; navigateToOrScroll('livestock.html')"><span class="en">Livestock</span><span class="ar">الأغنام</span></a></li>
                </template>
                <template x-if="settings.enable_meat_section">
                    <li><a href="meat.html" class="nav-link bil-inline" :class="{'active-nav': isCurrentPage('meat.html')}" @click.prevent="isMobNavOpen = false; navigateToOrScroll('meat.html')"><span class="en">Meat</span><span class="ar">اللحوم</span></a></li>
                </template>
                <template x-if="settings.enable_gatherings_section">
                    <li><a href="gatherings.html" class="nav-link bil-inline" :class="{'active-nav': isCurrentPage('gatherings.html')}" @click.prevent="isMobNavOpen = false; navigateToOrScroll('gatherings.html')"><span class="en">Gatherings</span><span class="ar">الولائم</span></a></li>
                </template>
                 <li>
                    <button @click="openOrderStatusModal()" class="nav-link as-button" title="Order Status" aria-label="Order Status">
                        <svg class="nav-icon" viewBox="0 0 24 24" fill="currentColor" width="20" height="20" aria-hidden="true"><path d="M19.5 3.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2v14H3v3c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-3h-3V2zM15 20H9v-2h6v2zm0-4H9v-2h6v2zm-4.5-4L9 10.5l1.5-1.5L12 10.5l1.5-1.5L15 10.5V5h1.5v15H18V5h1.5v15H21V2l-1.5 1.5z"/></svg>
                    </button>
                </li>
                <template x-if="!currentUser">
                    <li><a href="auth.html" class="nav-link bil-inline" :class="{'active-nav': isCurrentPage('auth.html')}" @click.prevent="isMobNavOpen = false; navigateToOrScroll('auth.html')"><span class="en">Login/Register</span><span class="ar">دخول/تسجيل</span></a></li>
                </template>
                <template x-if="currentUser">
                    <li><a href="account.html" class="nav-link bil-inline" :class="{'active-nav': isCurrentPage('account.html')}" @click.prevent="isMobNavOpen = false; navigateToOrScroll('account.html')"><span class="en">My Account</span><span class="ar">حسابي</span></a></li>
                    <li><button @click="logoutUser()" class="nav-link bil-inline as-button"><span class="en">Logout</span><span class="ar">خروج</span></button></li>
                </template>
                 <li>
                    <button @click="openCart()" class="nav-link as-button" title="Shopping Cart" aria-label="Shopping Cart">
                        <svg class="nav-icon" viewBox="0 0 24 24" fill="currentColor" width="20" height="20" aria-hidden="true"><path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2S15.9 22 17 22s2-.9 2-2-.9-2-2-2zm-1.45-5c.75 0 1.41-.41 1.75-1.03l3.58-6.49A.996.996 0 0020.01 4H5.21l-.94-2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2h7.45zM6.16 6h12.15l-2.76 5H8.53L6.16 6z"/></svg>
                        <span x-show="cartItems.length > 0" class="cart-count-badge" x-text="cartItemCount"></span>
                    </button>
                </li>
            </ul>
        </nav>
        <div class="head-extras desk-extras">
            <div class="curr-sel">
                <label for="curr-sel-desk" class="sr-only">Select Currency</label>
                <select id="curr-sel-desk" x-model="curr" aria-label="Select Currency">
                    <template x-for="code in Object.keys(settings.xchgRates)" :key="code">
                        <option :value="code" x-text="code" :disabled="!settings.xchgRates[code].is_active"></option>
                    </template>
                </select>
            </div>
            <div class="wa-contact">
                <a :href="'https://wa.me/' + settings.waNumRaw" target="_blank" rel="noopener noreferrer" title="Chat on WhatsApp">
                    <svg class="wa-icon" aria-hidden="true" focusable="false" viewBox="0 0 24 24" fill="currentColor"><path d="M12.04 2C6.58 2 2.13 6.45 2.13 11.91C2.13 13.66 2.59 15.35 3.43 16.84L2.05 22l5.26-1.39c1.44.75 3.05 1.18 4.73 1.18 5.46 0 9.91-4.45 9.91-9.91S17.5 2 12.04 2zm0 18.13c-1.48 0-2.91-.38-4.15-1.08l-.34-.2-3.14.83.85-3.05-.22-.35A8.04 8.04 0 0 1 3.79 11.91c0-4.41 3.72-8.13 8.25-8.13s8.25 3.72 8.25 8.13-3.72 8.13-8.25 8.13zm5.32-5.68c-.25-.13-1.55-.76-1.79-.85s-.42-.13-.6.12c-.17.25-.67.85-.82 1.02s-.3.18-.55.06c-.25-.12-1.11-.41-2.15-1.33S10.08 13 9.91 12.74s.13-.24.26-.37c.11-.11.25-.29.39-.46s.05-.11.18-.36c.13-.25.08-.43 0-.55s-.56-1.39-.79-1.94c-.23-.55-.45-.49-.62-.49h-.17c-.16 0-.42.05-.64.3s-.85.82-.85 2.02S8.11 13.5 8.24 13.67s1.47 2.28 3.74 3.2c.5.25.93.4 1.26.51.52.15.94.12 1.27.07.38-.06 1.07-.44 1.27-.81.2-.38.2-.7.15-.82s-.15-.07-.4-.18z"/></svg>
                    <span class="wa-num" x-text="settings.waNumDisp"></span>
                </a>
            </div>
        </div>
        <button class="menu-btn" @click="isMobNavOpen = !isMobNavOpen" aria-label="Toggle menu" :aria-expanded="isMobNavOpen.toString()" aria-controls="mob-nav-content">
            <svg aria-hidden="true" focusable="false" viewBox="0 0 24 24" fill="currentColor" width="28" height="28">
                <path x-show="!isMobNavOpen" d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path>
                <path x-show="isMobNavOpen" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
            </svg>
        </button>
    </div>
    <div class="mob-nav" id="mob-nav-content" x-show="isMobNavOpen" x-transition @click.outside="isMobNavOpen = false">
        <nav aria-label="Mobile navigation">
            <ul class="nav-list-mob">
                <template x-if="settings.enable_udheya_section">
                    <li>
                        <a href="udheya.html" class="nav-link-mob bil-inline" :class="{'active-nav': isCurrentPage('udheya.html')}" @click.prevent="isMobNavOpen = false; navigateToOrScroll('udheya.html')">
                            <span class="en">Udheya</span><span class="ar">الأضحية</span>
                        </a>
                    </li>
                </template>
                <template x-if="settings.enable_livestock_section">
                <li>
                    <a href="livestock.html" class="nav-link-mob bil-inline" :class="{'active-nav': isCurrentPage('livestock.html')}" @click.prevent="isMobNavOpen = false; navigateToOrScroll('livestock.html')">
                        <span class="en">Livestock</span><span class="ar">الأغنام</span>
                    </a>
                </li>
                </template>
                <template x-if="settings.enable_meat_section">
                <li>
                    <a href="meat.html" class="nav-link-mob bil-inline" :class="{'active-nav': isCurrentPage('meat.html')}" @click.prevent="isMobNavOpen = false; navigateToOrScroll('meat.html')">
                        <span class="en">Meat</span><span class="ar">اللحوم</span>
                    </a>
                </li>
                </template>
                <template x-if="settings.enable_gatherings_section">
                <li>
                    <a href="gatherings.html" class="nav-link-mob bil-inline" :class="{'active-nav': isCurrentPage('gatherings.html')}" @click.prevent="isMobNavOpen = false; navigateToOrScroll('gatherings.html')">
                        <span class="en">Gatherings</span><span class="ar">الولائم</span>
                    </a>
                </li>
                </template>
                <li>
                    <button @click="openOrderStatusModal(); isMobNavOpen = false;" class="nav-link-mob as-button" title="Order Status" aria-label="Order Status">
                        <svg class="nav-icon" viewBox="0 0 24 24" fill="currentColor" width="20" height="20" aria-hidden="true"><path d="M19.5 3.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2v14H3v3c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-3h-3V2zM15 20H9v-2h6v2zm0-4H9v-2h6v2zm-4.5-4L9 10.5l1.5-1.5L12 10.5l1.5-1.5L15 10.5V5h1.5v15H18V5h1.5v15H21V2l-1.5 1.5z"/></svg>
                    </button>
                </li>
                 <template x-if="!currentUser">
                    <li><a href="auth.html" class="nav-link-mob bil-inline" :class="{'active-nav': isCurrentPage('auth.html')}" @click.prevent="isMobNavOpen = false; navigateToOrScroll('auth.html')"><span class="en">Login/Register</span><span class="ar">دخول/تسجيل</span></a></li>
                </template>
                <template x-if="currentUser">
                    <li><a href="account.html" class="nav-link-mob bil-inline" :class="{'active-nav': isCurrentPage('account.html')}" @click.prevent="isMobNavOpen = false; navigateToOrScroll('account.html')"><span class="en">My Account</span><span class="ar">حسابي</span></a></li>
                    <li><button @click="logoutUser(); isMobNavOpen = false;" class="nav-link-mob bil-inline as-button"><span class="en">Logout</span><span class="ar">خروج</span></button></li>
                </template>
                <li>
                    <button @click="openCart(); isMobNavOpen = false;" class="nav-link-mob as-button" title="Shopping Cart" aria-label="Shopping Cart">
                        <svg class="nav-icon" viewBox="0 0 24 24" fill="currentColor" width="20" height="20" aria-hidden="true"><path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2S15.9 22 17 22s2-.9 2-2-.9-2-2-2zm-1.45-5c.75 0 1.41-.41 1.75-1.03l3.58-6.49A.996.996 0 0020.01 4H5.21l-.94-2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2h7.45zM6.16 6h12.15l-2.76 5H8.53L6.16 6z"/></svg>
                        <span x-show="cartItems.length > 0" class="cart-count-badge" x-text="cartItemCount"></span>
                    </button>
                </li>
            </ul>
        </nav>
        <div class="mob-extras">
            <div class="curr-sel">
                <label for="curr-sel-mob" class="sr-only">Select Currency</label>
                <select id="curr-sel-mob" x-model="curr" aria-label="Select Currency Mobile">
                     <template x-for="code in Object.keys(settings.xchgRates)" :key="code">
                        <option :value="code" x-text="code" :disabled="!settings.xchgRates[code].is_active"></option>
                    </template>
                </select>
            </div>
            <div class="wa-contact">
                 <a :href="'https://wa.me/' + settings.waNumRaw" target="_blank" rel="noopener noreferrer" title="Chat on WhatsApp" @click="isMobNavOpen = false">
                    <svg class="wa-icon" aria-hidden="true" focusable="false" viewBox="0 0 24 24" fill="currentColor"><path d="M12.04 2C6.58 2 2.13 6.45 2.13 11.91C2.13 13.66 2.59 15.35 3.43 16.84L2.05 22l5.26-1.39c1.44.75 3.05 1.18 4.73 1.18 5.46 0 9.91-4.45 9.91-9.91S17.5 2 12.04 2zm0 18.13c-1.48 0-2.91-.38-4.15-1.08l-.34-.2-3.14.83.85-3.05-.22-.35A8.04 8.04 0 0 1 3.79 11.91c0-4.41 3.72-8.13 8.25-8.13s8.25 3.72 8.25 8.13-3.72 8.13-8.25 8.13zm5.32-5.68c-.25-.13-1.55-.76-1.79-.85s-.42-.13-.6.12c-.17.25-.67.85-.82 1.02s-.3.18-.55.06c-.25-.12-1.11-.41-2.15-1.33S10.08 13 9.91 12.74s.13-.24.26-.37c.11-.11.25-.29.39-.46s.05-.11.18-.36c.13-.25.08-.43 0-.55s-.56-1.39-.79-1.94c-.23-.55-.45-.49-.62-.49h-.17c-.16 0-.42.05-.64.3s-.85.82-.85 2.02S8.11 13.5 8.24 13.67s1.47 2.28 3.74 3.2c.5.25.93.4 1.26.51.52.15.94.12 1.27.07.38-.06 1.07-.44 1.27-.81.2-.38.2-.7.15-.82s-.15-.07-.4-.18z"/></svg>
                    <span class="wa-num" x-text="settings.waNumDisp"></span>
                </a>
            </div>
        </div>
    </div>
</header>

<main>
    <section id="live-sect" class="main-page-sec sec" style="background-color: var(--b2);" x-show="settings.enable_livestock_section">
        <div class="c">
            <div class="sec-head">
                <h1 class="bil-spread" tabindex="-1">
                    <span class="en">Our Livestock</span><span class="ar">أغنامنا (المواشي العامة)</span>
                </h1>
            </div>
            <p class="bil-row section-intro">
                <span class="en">Explore our selection of high-quality livestock, available for various purposes such as breeding, Aqeeqah, or general consumption. Each animal is raised with care to ensure health and vitality.</span>
                <span class="ar">تصفح مجموعتنا المختارة من المواشي عالية الجودة، المتاحة لأغراض متنوعة مثل التربية، العقيقة، أو الاستهلاك العام. يتم تربية كل حيوان بعناية لضمان صحته وحيويته.</span>
            </p>
            <div x-show="prodOpts.livestock_general && prodOpts.livestock_general.length > 0" class="prod-grid grid2">
                <template x-for="productType in prodOpts.livestock_general" :key="productType.valKey + '-ls'">
                    <template x-for="item in productType.wps" :key="item.itemKey + '-ls-item'">
                        <div class="card card-live">
                            <div class="card-img">
                                <img :src="'images/' + productType.valKey + '-sheep.jpg'" :alt="productType.nameEn  + ' - ' + item.nameENSpec"  loading="lazy">
                                <div class="badge bil-inline"><span class="en" x-text="productType.valKey.toUpperCase().replace('_', ' ')"></span><span class="ar" x-text="productType.nameAr.split(' ')[0]"></span></div>
                            </div>
                            <div class="card-b">
                                <div class="card-content">
                                    <h3 class="card-h bil-spread"><span x-text="item.nameENSpec"></span><span x-text="item.nameARSpec"></span></h3>
                                    <div class="bil-row card-p-row">
                                        <p class="en card-p" x-text="item.descEn || productType.descEn"></p>
                                        <p class="ar card-p" x-text="item.descAr || productType.descAr"></p>
                                    </div>
                                </div>
                                <div class="card-foot">
                                    <div class="price bil-row">
                                        <span class="en"><strong x-text="fmtPrice(item.priceEGP)"></strong></span>
                                        <span class="ar"><strong x-text="fmtPrice(item.priceEGP)"></strong></span>
                                    </div>
                                    <div class="card-act">
                                        <button type="button" @click="addItemToCart(item)" class="btn bac btn-sm bil-inline" :disabled="!item.isActive || item.stock <= 0 || load.addingToCart === item.itemKey">
                                            <span x-show="load.addingToCart !== item.itemKey"><span class="en">Add to Cart</span><span class="ar">أضف للسلة</span></span>
                                            <span x-show="load.addingToCart === item.itemKey" aria-live="polite"><span class="en">Adding...</span><span class="ar">جاري...</span></span>
                                        </button>
                                        <span class="stock-display bil-inline" :class="{'out-of-stock': !item.isActive || item.stock <= 0}">
                                            <span class="en" x-text="getStockDisplayInfo(item.stock, item.isActive, 'en')"></span>
                                            <span class="ar" x-text="getStockDisplayInfo(item.stock, item.isActive, 'ar')"></span>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </template>
                </template>
            </div>
             <div class="empty-state tc" x-show="(!prodOpts.livestock_general || prodOpts.livestock_general.length === 0) && !load.init">
                <p class="bil-row">
                    <span class="en" style="flex-basis: 100%;">Our livestock offerings are currently being updated. Please check back soon for the latest availability!</span>
                    <span class="ar" style="flex-basis: 100%;">يتم تحديث عروض المواشي لدينا حاليًا. يرجى التحقق مرة أخرى قريبًا لمعرفة أحدث المتوفر!</span>
                </p>
                <button @click="navigateToOrScroll('index.html')" class="btn bp btn-sm bil-inline" style="margin-top: var(--s1);">
                    <span class="en">Back to Home</span><span class="ar">العودة للرئيسية</span>
                </button>
            </div>
            <p class="f-note bil-row tc" x-show="addedToCartMsg.text && addedToCartMsg.pageContext === 'livestock'" :class="addedToCartMsg.isError ? 'err-msg' : 'succ-msg'" style="margin-top:var(--s2); justify-content: center;">
                <span class="en" x-text="addedToCartMsg.isError ? (errs[addedToCartMsg.text] ? errs[addedToCartMsg.text].en : (addedToCartMsg.text.en || addedToCartMsg.text) ) : (addedToCartMsg.text.en || addedToCartMsg.text)"></span>
                <span class="ar" x-text="addedToCartMsg.isError ? (errs[addedToCartMsg.text] ? errs[addedToCartMsg.text].ar : (addedToCartMsg.text.ar || addedToCartMsg.text) ) : (addedToCartMsg.text.ar || addedToCartMsg.text)"></span>
            </p>
        </div>
    </section>
</main>

<footer class="foot main-page-sec">
    <div class="c">
        <div class="foot-grid">
            <div class="bil-row foot-brand-desc">
                <p class="en">Your full-service Egyptian team, committed to meeting your needs with speed and quality, sparing you market visits.</p>
                <p class="ar">فريق متكامل لتلبية احتياجاتك بأسرع وقت وأفضل جودة، ونكفيك عناء الذهاب للسوق.</p>
            </div>
        </div>
        <div class="foot-pay tc">
            <h5 class="bil-spread">
                <span class="en">Secure Payment Options Available</span><span class="ar">تتوفر خيارات دفع آمنة</span>
            </h5>
        </div>
        <hr class="foot-div">
        <p class="foot-copy">© <span x-text="new Date().getFullYear()"></span> Sheep Land.
            <span class="bil-copy">
                <span class="en">All rights reserved.</span><span class="ar">جميع الحقوق محفوظة.</span>
            </span>
             | <button @click.prevent="openRefundModal()" class="footer-link-btn bil-inline"><span class="en">Refund Policy</span><span class="ar">سياسة الاسترداد</span></button>
        </p>
    </div>
</footer>
<script src="pocketbase.umd.js"></script>
<script defer src="alpine.min.js"></script>
<script defer src="alpine-collapse.min.js"></script>
<script src="script.js"></script>

</body>
</html>
