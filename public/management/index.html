<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>ูุธุงู ุฅุฏุงุฑุฉ ูุฒุฑุนุฉ ุงูุฃุบูุงู</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> 
</head>
<body>
    <div class="app-container" id="app-container-sfms">
        <div class="pull-to-refresh" id="pagePullToRefresh">
            <div class="ptr-content">
                <span class="ptr-icon">โ</span>
                <span class="ptr-text">ุงุณุญุจ ููุชุญุฏูุซ</span>
            </div>
        </div>
        <div class="app-header">
            <div class="header-content">
                <h1 class="app-title" id="sfmFarmNameTitle">๐ ูุธุงู ุฅุฏุงุฑุฉ ูุฒุฑุนุฉ ุงูุฃุบูุงู</h1>
                <div class="header-actions">
                    <button class="header-btn" id="sfmsSyncBtn" onclick="syncSfmData()" title="ูุฒุงููุฉ ุงูุจูุงูุงุช">๐</button>
                    <button class="header-btn" id="sfmsMenuBtn" onclick="showSfmBottomSheet('sfmsMenuSheet')">โฐ</button>
                </div>
            </div>
        </div>

        <div class="content-area" id="sfmsContentArea">
            <div class="swipe-indicator swipe-left" id="navSwipeLeft">โ</div>
            <div class="swipe-indicator swipe-right" id="navSwipeRight">โ</div>
            <div class="section-page active" id="dashboard">
                <div class="card">
                    <div class="card-header"><h2 class="card-title"><span class="card-icon">๐</span> ููุญุฉ ุงูุชุญูู ุงูุฑุฆูุณูุฉ</h2></div>
                    <div class="stats-grid-dynamic" id="dashboardStats">
                        <div class="stat-card"><div class="stat-value" id="dashTotalAnimals">0</div><div class="stat-label">ุฅุฌูุงูู ุงูุญููุงูุงุช</div></div>
                        <div class="stat-card"><div class="stat-value" id="dashEwesCount">0</div><div class="stat-label">ุงููุนุงุฌ</div></div>
                        <div class="stat-card"><div class="stat-value" id="dashRamsCount">0</div><div class="stat-label">ุงููุจุงุด</div></div>
                        <div class="stat-card"><div class="stat-value" id="dashLambsCount">0</div><div class="stat-label">ุงูุญููุงู</div></div>
                        <div class="stat-card alert-card" id="dashHealthAlertsCard"><div class="stat-value" id="dashHealthAlerts">0</div><div class="stat-label">ุชูุจููุงุช ุตุญูุฉ</div></div>
                        <div class="stat-card alert-card" id="dashFeedStockLowCard"><div class="stat-value" id="dashFeedStockLow">0</div><div class="stat-label">ููุต ูุฎุฒูู ุนูู</div></div>
                        <div class="stat-card"><div class="stat-value" id="dashUpcomingLambings">0</div><div class="stat-label">ููุงุฏุงุช ูุชููุนุฉ</div></div>
                        <div class="stat-card"><div class="stat-value" id="dashAvgDailyGain">0 ูุฌู</div><div class="stat-label">ูุชูุณุท ุงูููู ุงููููู</div></div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header"><h2 class="card-title"><span class="card-icon">๐</span> ุชูุจููุงุช ูููุงู ูุงุฏูุฉ</h2><button class="btn btn-sm btn-secondary" onclick="showSfmSection('taskManagement')">ุนุฑุถ ุงููู</button></div>
                    <ul class="task-list" id="dashboardTasks"></ul>
                    <p id="noDashboardTasksMessage" class="list-empty-message" style="display:none;">ูุง ุชูุฌุฏ ููุงู ุฃู ุชูุจููุงุช ุนุงุฌูุฉ.</p>
                </div>
                <div class="card">
                    <div class="card-header"><h2 class="card-title"><span class="card-icon">๐</span> ูุคุดุฑุงุช ุฃุฏุงุก ุณุฑูุนุฉ</h2></div>
                    <div class="chart-container" style="height: 220px;"><canvas id="dashboardPerformanceChart"></canvas></div>
                    <div class="chart-container" style="height: 220px; margin-top:20px;"><canvas id="dashboardBreedingChart"></canvas></div>
                </div>
            </div>

            <div class="section-page" id="animalManagement">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title"><span class="card-icon">๐</span> ุฅุฏุงุฑุฉ ุงููุทูุน</h2>
                        <button class="btn btn-primary btn-sm" onclick="openAnimalFormModal(null)">ุฅุถุงูุฉ ุญููุงู</button>
                    </div>
                    <div class="input-field">
                        <input type="text" id="animalSearchInput" oninput="filterAnimalList()" placeholder="ุจุญุซ ุจุงูุฑููุ ุงูุงุณูุ ุงูุณูุงูุฉ...">
                    </div>
                    <div class="input-grid-4" style="margin-bottom: 10px;">
                        <div class="input-field-sm"><label for="animalFilterBreed" class="input-label-sm">ุงูุณูุงูุฉ:</label><select id="animalFilterBreed" onchange="filterAnimalList()"><option value="">ุงููู</option></select></div>
                        <div class="input-field-sm"><label for="animalFilterSex" class="input-label-sm">ุงูุฌูุณ:</label><select id="animalFilterSex" onchange="filterAnimalList()"><option value="">ุงููู</option><option value="male">ุฐูุฑ</option><option value="female">ุฃูุซู</option></select></div>
                        <div class="input-field-sm"><label for="animalFilterStatus" class="input-label-sm">ุงูุญุงูุฉ:</label><select id="animalFilterStatus" onchange="filterAnimalList()"><option value="">ุงููู</option></select></div>
                        <div class="input-field-sm"><label for="animalSortBy" class="input-label-sm">ุชุฑุชูุจ ุญุณุจ:</label><select id="animalSortBy" onchange="sortAndRenderAnimalList()"><option value="tagId">ุงูุฑูู ุงูุชุนุฑููู</option><option value="birthDate">ุชุงุฑูุฎ ุงููููุงุฏ</option><option value="breed">ุงูุณูุงูุฉ</option></select></div>
                    </div>
                    <div class="batch-actions-bar" id="animalBatchActionsBar" style="display:none; margin-bottom:10px;">
                        <button class="btn btn-sm btn-secondary" onclick="handleAnimalBatchAction('vaccinate')">ุชุญุตูู ุฌูุงุนู</button>
                        <button class="btn btn-sm btn-secondary" onclick="handleAnimalBatchAction('treat')">ุนูุงุฌ ุฌูุงุนู</button>
                        <button class="btn btn-sm btn-secondary" onclick="handleAnimalBatchAction('moveGroup')">ููู ูุฌููุนุฉ</button>
                        <button class="btn btn-sm btn-warning" onclick="handleAnimalBatchAction('sellGroup')">ุจูุน ูุฌููุนุฉ</button>
                    </div>
                    <div class="table-responsive-container">
                        <table class="data-table" id="animalListTable">
                            <thead><tr><th><input type="checkbox" id="selectAllAnimalsCheckbox" onchange="toggleSelectAllAnimals(this.checked)"></th><th>ุงูุฑูู</th><th>ุตูุฑุฉ</th><th>ุงูุณูุงูุฉ</th><th>ุงูุฌูุณ</th><th>ุงูุนูุฑ</th><th>ุงูุญุงูุฉ</th><th>ุฅุฌุฑุงุกุงุช</th></tr></thead>
                            <tbody id="animalListTableBody"></tbody>
                        </table>
                    </div>
                    <p id="noAnimalsMessage" class="list-empty-message" style="display:none;">ูุง ุชูุฌุฏ ุญููุงูุงุช ูุณุฌูุฉ.</p>
                </div>
            </div>

            <div class="section-page" id="breedingManagement">
                <div class="card">
                    <div class="card-header"><h2 class="card-title"><span class="card-icon">โญ</span> ุณุฌูุงุช ุงูุชุฒุงูุฌ</h2><button class="btn btn-primary btn-sm" onclick="openMatingFormModal(null)">ุชุณุฌูู ุชุฒุงูุฌ</button></div>
                    <div class="table-responsive-container">
                        <table class="data-table" id="matingRecordsTable">
                            <thead><tr><th>ุงููุนุฌุฉ (ID)</th><th>ุงููุจุด (ID)</th><th>ุชุงุฑูุฎ ุงูุชุฒุงูุฌ</th><th>ููุงุฏุฉ ูุชููุนุฉ</th><th>ุงูุญุงูุฉ</th><th>ุฅุฌุฑุงุกุงุช</th></tr></thead>
                            <tbody id="matingRecordsTableBody"></tbody>
                        </table>
                    </div>
                     <p id="noMatingsMessage" class="list-empty-message" style="display:none;">ูุง ุชูุฌุฏ ุณุฌูุงุช ุชุฒุงูุฌ.</p>
                </div>
                <div class="card">
                    <div class="card-header"><h2 class="card-title"><span class="card-icon">๐ผ</span> ุณุฌูุงุช ุงูููุงุฏุฉ</h2><button class="btn btn-primary btn-sm" onclick="openLambingFormModal(null)">ุชุณุฌูู ููุงุฏุฉ</button></div>
                     <div class="table-responsive-container">
                        <table class="data-table" id="lambingRecordsTable">
                            <thead><tr><th>ุงูุฃู (ID)</th><th>ุชุงุฑูุฎ ุงูููุงุฏุฉ</th><th>ุนุฏุฏ ุงูููุงููุฏ</th><th>ููุงููุฏ (IDs)</th><th>ููุงุญุธุงุช</th><th>ุฅุฌุฑุงุกุงุช</th></tr></thead>
                            <tbody id="lambingRecordsTableBody"></tbody>
                        </table>
                    </div>
                    <p id="noLambingsMessage" class="list-empty-message" style="display:none;">ูุง ุชูุฌุฏ ุณุฌูุงุช ููุงุฏุฉ.</p>
                </div>
                 <div class="card">
                    <div class="card-header"><h2 class="card-title"><span class="card-icon">๐ฟ</span> ุณุฌูุงุช ุงููุทุงู</h2><button class="btn btn-primary btn-sm" onclick="openWeaningFormModal(null)">ุชุณุฌูู ูุทุงู</button></div>
                     <div class="table-responsive-container">
                        <table class="data-table" id="weaningRecordsTable">
                            <thead><tr><th>ุงูููููุฏ (ID)</th><th>ุชุงุฑูุฎ ุงููุทุงู</th><th>ูุฒู ุงููุทุงู (ูุฌู)</th><th>ููุงุญุธุงุช</th><th>ุฅุฌุฑุงุกุงุช</th></tr></thead>
                            <tbody id="weaningRecordsTableBody"></tbody>
                        </table>
                    </div>
                    <p id="noWeaningsMessage" class="list-empty-message" style="display:none;">ูุง ุชูุฌุฏ ุณุฌูุงุช ูุทุงู.</p>
                </div>
            </div>

            <div class="section-page" id="healthManagement">
                <div class="card">
                    <div class="card-header"><h2 class="card-title"><span class="card-icon">โ๏ธ</span> ุงูุณุฌู ุงูุตุญู</h2><button class="btn btn-primary btn-sm" onclick="openHealthRecordFormModal(null)">ุฅุถุงูุฉ ุณุฌู</button></div>
                    <div class="input-field"><input type="text" id="healthSearchInput" oninput="filterHealthRecords()" placeholder="ุจุญุซ ุจุงูุญููุงูุ ุงูุชุดุฎูุตุ ุงูุฏูุงุก..."></div>
                     <div class="table-responsive-container">
                        <table class="data-table" id="healthRecordsTable">
                            <thead><tr><th>ุงูุญููุงู (ID)</th><th>ุงูุชุงุฑูุฎ</th><th>ุงูููุน</th><th>ุงูุชูุงุตูู</th><th>ุงูุฏูุงุก</th><th>ูุชุฑุฉ ุงูุณุญุจ</th><th>ุฅุฌุฑุงุกุงุช</th></tr></thead>
                            <tbody id="healthRecordsTableBody"></tbody>
                        </table>
                    </div>
                     <p id="noHealthRecordsMessage" class="list-empty-message" style="display:none;">ูุง ุชูุฌุฏ ุณุฌูุงุช ุตุญูุฉ.</p>
                </div>
            </div>

            <div class="section-page" id="feedingManagement">
                <div class="card">
                    <div class="card-header"><h2 class="card-title"><span class="card-icon">๐พ</span> ุฅุฏุงุฑุฉ ุงูุชุบุฐูุฉ ูุงูุฎูุทุงุช</h2> <button class="btn btn-primary btn-sm" onclick="openFeedRationFormModal(null)">ุฎูุทุฉ ุฌุฏูุฏุฉ</button></div>
                    <div class="input-field"><label class="input-label" for="feedRationSelect">ุงุฎุชุฑ ุงูุฎูุทุฉ/ุงููุฌููุนุฉ:</label><select id="feedRationSelect" onchange="displaySelectedRation()"><option value="">-- ุงุฎุชุฑ --</option></select></div>
                    <div id="feedRationDetailsDisplay" class="card" style="background-color: #f9f9f9; min-height:100px;"></div>
                    <button class="btn btn-secondary" onclick="openFeedConsumptionLogModal()">ุชุณุฌูู ุงุณุชููุงู ุนูู</button>
                </div>
                 <div class="card">
                    <div class="card-header"><h2 class="card-title"><span class="card-icon">๐ง</span> ุงุณุชููุงู ุงูููุงู</h2></div>
                    <div class="input-field"><label class="input-label" for="waterConsumptionDate">ุงูุชุงุฑูุฎ:</label><input type="date" id="waterConsumptionDate"></div>
                    <div class="input-field"><label class="input-label" for="waterConsumptionAmount">ุงุณุชููุงู ุงูููุงู ุงูููู (ูุชุฑ):</label><input type="number" id="waterConsumptionAmount" value="0" inputmode="numeric" min="0"></div>
                    <button class="btn btn-primary" onclick="logWaterConsumption()">ุชุณุฌูู ุงูุงุณุชููุงู</button>
                     <div id="waterLogDisplay" style="margin-top:15px; max-height: 150px; overflow-y: auto;"></div>
                </div>
            </div>
            
            <div class="section-page" id="inventoryManagement">
                <div class="card">
                    <div class="card-header"><h2 class="card-title"><span class="card-icon">๐ฆ</span> ุฅุฏุงุฑุฉ ุงููุฎุฒูู</h2><button class="btn btn-primary btn-sm" onclick="openInventoryItemFormModal(null)">ุฅุถุงูุฉ ุนูุตุฑ</button></div>
                    <div class="input-field"><input type="text" id="inventorySearchInput" oninput="filterInventoryList()" placeholder="ุจุญุซ ุจุงุณู ุงูุนูุตุฑ ุฃู ุงูููุน..."></div>
                     <div class="input-field"><label for="inventoryFilterType" class="input-label-sm">ููุชุฑุฉ ุจุงูููุน:</label><select id="inventoryFilterType" onchange="filterInventoryList()"><option value="">ุงููู</option><option value="feed">ุนูู</option><option value="medication">ุฏูุงุก</option><option value="supply">ูุณุชูุฒูุงุช</option><option value="product">ููุชุฌ ููุจูุน</option></select></div>
                    <div class="table-responsive-container">
                        <table class="data-table" id="inventoryTable">
                            <thead><tr><th>ุงูุนูุตุฑ</th><th>ุงูููุน</th><th>ุงููููุฉ</th><th>ุงููุญุฏุฉ</th><th>ุญุฏ ุงูุทูุจ</th><th>ุฅุฌุฑุงุกุงุช</th></tr></thead>
                            <tbody id="inventoryTableBody"></tbody>
                        </table>
                    </div>
                    <p id="noInventoryMessage" class="list-empty-message" style="display:none;">ุงููุฎุฒูู ูุงุฑุบ.</p>
                </div>
            </div>

             <div class="section-page" id="taskManagement">
                <div class="card">
                    <div class="card-header"><h2 class="card-title"><span class="card-icon">๐</span> ุฅุฏุงุฑุฉ ุงูููุงู</h2><button class="btn btn-primary btn-sm" onclick="openTaskFormModal(null)">ูููุฉ ุฌุฏูุฏุฉ</button></div>
                    <div class="input-grid-3" style="margin-bottom: 10px;">
                        <div class="input-field-sm"><label for="taskFilterStatus" class="input-label-sm">ุงูุญุงูุฉ:</label><select id="taskFilterStatus" onchange="renderTaskList()"><option value="all">ุงููู</option><option value="pending">ูุนููุฉ</option><option value="in_progress">ููุฏ ุงูุชูููุฐ</option><option value="completed">ููุชููุฉ</option></select></div>
                        <div class="input-field-sm"><label for="taskFilterPriority" class="input-label-sm">ุงูุฃููููุฉ:</label><select id="taskFilterPriority" onchange="renderTaskList()"><option value="all">ุงููู</option><option value="high">ุนุงููุฉ</option><option value="medium">ูุชูุณุทุฉ</option><option value="low">ููุฎูุถุฉ</option></select></div>
                        <div class="input-field-sm"><label for="taskSortByDate" class="input-label-sm">ุงูุชุฑุชูุจ:</label><select id="taskSortByDate" onchange="renderTaskList()"><option value="dueDateAsc">ุชุงุฑูุฎ ุงูุงุณุชุญูุงู (ุชุตุงุนุฏู)</option><option value="dueDateDesc">ุชุงุฑูุฎ ุงูุงุณุชุญูุงู (ุชูุงุฒูู)</option></select></div>
                    </div>
                    <div id="taskListContainer" class="task-list-container"></div>
                    <p id="noTasksToListMessage" class="list-empty-message" style="display:none;">ูุง ุชูุฌุฏ ููุงู ุจูุฐู ุงูููุงุชุฑ.</p>
                </div>
            </div>

            <div class="section-page" id="salesPurchases">
                 <div class="card">
                    <div class="card-header"><h2 class="card-title"><span class="card-icon">๐ธ</span> ุงูุณุฌูุงุช ุงููุงููุฉ</h2></div>
                     <div class="input-grid-3" style="margin-bottom: 15px;">
                        <button class="btn btn-sm btn-success" onclick="openTransactionFormModal(null, 'sale')">ุชุณุฌูู ุจูุน</button>
                        <button class="btn btn-sm btn-warning" onclick="openTransactionFormModal(null, 'purchase')">ุชุณุฌูู ุดุฑุงุก</button>
                        <button class="btn btn-sm btn-danger" onclick="openTransactionFormModal(null, 'expense')">ุชุณุฌูู ูุตุฑูู</button>
                     </div>
                     <div class="input-field"><label class="input-label" for="transactionFilterType">ุนุฑุถ ุญุณุจ ุงูููุน:</label><select id="transactionFilterType" onchange="renderTransactionList()"><option value="all">ุงููู</option><option value="sale">ูุจูุนุงุช</option><option value="purchase">ูุดุชุฑูุงุช</option><option value="expense">ูุตุฑููุงุช ุฃุฎุฑู</option></select></div>
                    <div class="table-responsive-container">
                        <table class="data-table" id="transactionsTable">
                             <thead><tr><th>ุงูุชุงุฑูุฎ</th><th>ุงูููุน</th><th>ุงููุตู</th><th>ุงููุจูุบ</th><th>ุงูุทุฑู ุงูุขุฎุฑ</th><th>ุฅุฌุฑุงุกุงุช</th></tr></thead>
                            <tbody id="transactionsTableBody"></tbody>
                        </table>
                    </div>
                    <p id="noTransactionsMessage" class="list-empty-message" style="display:none;">ูุง ุชูุฌุฏ ูุนุงููุงุช ูุณุฌูุฉ.</p>
                </div>
            </div>

            <div class="section-page" id="reports">
                <div class="card">
                    <div class="card-header"><h2 class="card-title"><span class="card-icon">๐</span> ุงูุชูุงุฑูุฑ ุงูุชุญููููุฉ</h2></div>
                    <div class="input-grid-3">
                        <button class="btn btn-secondary" onclick="generateSfmReport('flockSummary')">ููุฎุต ุงููุทูุน</button>
                        <button class="btn btn-secondary" onclick="generateSfmReport('breedingPerformance')">ุฃุฏุงุก ุงูุชูุงุณู</button>
                        <button class="btn btn-secondary" onclick="generateSfmReport('healthSummary')">ููุฎุต ุงูุณุฌู ุงูุตุญู</button>
                        <button class="btn btn-secondary" onclick="generateSfmReport('feedConsumption')">ุงุณุชููุงู ุงูุฃุนูุงู</button>
                        <button class="btn btn-secondary" onclick="generateSfmReport('financialActuals')">ุงููุงููุงุช ุงููุนููุฉ</button>
                        <button class="btn btn-secondary" onclick="generateSfmReport('inventoryStatus')">ุญุงูุฉ ุงููุฎุฒูู</button>
                        <button class="btn btn-secondary" onclick="generateSfmReport('mortalityReport')">ุชูุฑูุฑ ุงููููู</button>
                        <button class="btn btn-secondary" onclick="generateSfmReport('cullingReport')">ุชูุฑูุฑ ุงูุงุณุชุจุนุงุฏ</button>
                        <button class="btn btn-secondary" onclick="generateSfmReport('growthPerformance')">ุฃุฏุงุก ุงูููู</button>
                        <button class="btn btn-secondary" onclick="generateSfmReport('equipmentMaintenance')">ุตูุงูุฉ ุงููุนุฏุงุช</button>
                    </div>
                    <div id="reportOutputArea" class="card" style="margin-top: 20px; background-color: #f9f9f9; min-height: 200px; padding:15px;">
                        <p class="list-empty-message" style="padding:20px;">ุงุฎุชุฑ ุชูุฑูุฑุงู ูุนุฑุถู.</p>
                    </div>
                </div>
            </div>
            
            <div class="section-page" id="settings">
                <div class="card">
                    <div class="card-header"><h2 class="card-title"><span class="card-icon">โ๏ธ</span> ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ</h2></div>
                    <div class="input-field"><label class="input-label" for="farmNameSetting">ุงุณู ุงููุฒุฑุนุฉ:</label><input type="text" id="farmNameSetting" placeholder="ุงุฏุฎู ุงุณู ุงููุฒุฑุนุฉ"></div>
                    <div class="input-field"><label class="input-label" for="farmOwnerSetting">ุงุณู ุงููุงูู:</label><input type="text" id="farmOwnerSetting" placeholder="ุงุฏุฎู ุงุณู ุงููุงูู"></div>
                    <div class="input-field"><label class="input-label" for="defaultCurrencySetting">ุงูุนููุฉ ุงูุงูุชุฑุงุถูุฉ:</label><input type="text" id="defaultCurrencySetting" value="ุฌ.ู" placeholder="ุฌ.ู"></div>
                    <div class="input-field"><label class="input-label" for="photoUploadMaxSizeMBSetting">ุงูุญุฏ ุงูุฃูุตู ูุญุฌู ุงูุตูุฑุฉ (MB):</label><input type="number" id="photoUploadMaxSizeMBSetting" value="2" min="1" max="10"></div>
                    <div class="input-field"><label class="input-label" for="lowStockWarningPercentageSetting">ุชูุจูู ููุต ุงููุฎุฒูู (% ูู ุญุฏ ุงูุทูุจ):</label><input type="number" id="lowStockWarningPercentageSetting" value="20" min="0" max="100"></div>
                    <button class="btn btn-primary" onclick="saveFarmSettings()">ุญูุธ ุงูุฅุนุฏุงุฏุงุช</button>
                </div>
                 <div class="card">
                    <div class="card-header"><h2 class="card-title"><span class="card-icon">๐งฌ</span> ุชุฎุตูุต ุงูุณูุงูุงุช ูุฃููุงุน ุงูุฃุนูุงู</h2></div>
                    <div class="input-field"><label class="input-label" for="customBreedsSetting">ุงูุณูุงูุงุช (ููุตููุฉ ุจูุงุตูุฉ):</label><textarea id="customBreedsSetting" placeholder="ุจูุฏู, ุฑุญูุงูู, ุจุฑูู..." rows="2"></textarea></div>
                    <div class="input-field"><label class="input-label" for="customFeedTypesSetting">ุฃููุงุน ุงูุฃุนูุงู (ููุตููุฉ ุจูุงุตูุฉ):</label><textarea id="customFeedTypesSetting" placeholder="ุนูู ุชุณููู, ุนูู ุญูุงุจ..." rows="2"></textarea></div>
                     <button class="btn btn-secondary" onclick="saveCustomTypes()">ุญูุธ ุงูุฃููุงุน ุงููุฎุตุตุฉ</button>
                </div>
                 <div class="card">
                    <div class="card-header"><h2 class="card-title"><span class="card-icon">๐๏ธ</span> ุฅุฏุงุฑุฉ ุงููุนุฏุงุช</h2><button class="btn btn-primary btn-sm" onclick="openEquipmentFormModal(null)">ุฅุถุงูุฉ ูุนุฏุฉ</button></div>
                    <div class="table-responsive-container">
                        <table class="data-table" id="equipmentListTable">
                            <thead><tr><th>ุงุณู ุงููุนุฏุฉ</th><th>ุชุงุฑูุฎ ุงูุดุฑุงุก</th><th>ุงูุชูููุฉ</th><th>ุขุฎุฑ ุตูุงูุฉ</th><th>ุฅุฌุฑุงุกุงุช</th></tr></thead>
                            <tbody id="equipmentListTableBody"></tbody>
                        </table>
                    </div>
                    <p id="noEquipmentMessage" class="list-empty-message" style="display:none;">ูุง ุชูุฌุฏ ูุนุฏุงุช ูุณุฌูุฉ.</p>
                 </div>
                 <div class="card">
                    <div class="card-header"><h2 class="card-title"><span class="card-icon">๐พ</span> ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช</h2></div>
                    <button class="btn btn-secondary" onclick="backupSfmData()">ูุณุฎ ุงุญุชูุงุทู ููุจูุงูุงุช</button>
                    <label class="btn btn-secondary" for="restoreSfmDataFile" style="margin-top:10px;">ุงุณุชุนุงุฏุฉ ุงูุจูุงูุงุช ูู ููู</label>
                    <input type="file" id="restoreSfmDataFile" style="display:none;" onchange="restoreSfmData(event)" accept=".json">
                    <button class="btn btn-danger" onclick="confirmClearAllData()" style="margin-top:10px;">ูุณุญ ุฌููุน ุจูุงูุงุช ุงููุฒุฑุนุฉ</button>
                </div>
            </div>
        </div>

        <div class="bottom-nav" id="sfmsBottomNav">
            <div class="nav-item active" onclick="showSfmSection('dashboard')"><span class="nav-icon">๐</span><span class="nav-label">ุงูุฑุฆูุณูุฉ</span></div>
            <div class="nav-item" onclick="showSfmSection('animalManagement')"><span class="nav-icon">๐</span><span class="nav-label">ุงูุญููุงูุงุช</span></div>
            <div class="nav-item" onclick="showSfmSection('breedingManagement')"><span class="nav-icon">โญ</span><span class="nav-label">ุงูุชูุงุณู</span></div>
            <div class="nav-item" onclick="showSfmSection('healthManagement')"><span class="nav-icon">โ๏ธ</span><span class="nav-label">ุงูุตุญุฉ</span></div>
            <div class="nav-item" id="sfmsMoreNavBtn" onclick="showSfmBottomSheet('sfmsMoreSheet')"><span class="nav-icon">โฏ</span><span class="nav-label">ุงููุฒูุฏ</span></div>
        </div>
        
        <button class="fab" id="sfmMainFab" onclick="handleSfmFabClick()">
            <span>โ</span>
        </button>

        <div class="bottom-sheet" id="sfmsMenuSheet">
            <div class="sheet-header"><h2 class="sheet-title">ูุงุฆูุฉ ุงููุธุงู</h2><button class="sheet-close" onclick="hideSfmBottomSheet('sfmsMenuSheet')">โ</button></div>
            <div class="sheet-content">
                <button class="btn btn-secondary" onclick="showSfmSection('settings'); hideSfmBottomSheet('sfmsMenuSheet');">โ๏ธ ุงูุฅุนุฏุงุฏุงุช</button>
                <button class="btn btn-secondary" onclick="backupSfmData()">๐พ ูุณุฎ ุงุญุชูุงุทู</button>
                <button class="btn btn-secondary" onclick="document.getElementById('restoreSfmDataFileMenu').click()">๐ ุงุณุชุนุงุฏุฉ ุจูุงูุงุช</button>
                <input type="file" id="restoreSfmDataFileMenu" accept=".json" onchange="restoreSfmData(event); hideSfmBottomSheet('sfmsMenuSheet');" style="display: none;">
            </div>
        </div>
        
        <div class="bottom-sheet" id="sfmsMoreSheet">
            <div class="sheet-header"><h2 class="sheet-title">ุฃูุณุงู ุฅุถุงููุฉ</h2><button class="sheet-close" onclick="hideSfmBottomSheet('sfmsMoreSheet')">โ</button></div>
            <div class="sheet-content">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 12px;">
                    <button class="nav-item" onclick="showSfmSection('feedingManagement'); hideSfmBottomSheet('sfmsMoreSheet');"><span class="nav-icon">๐พ</span><span class="nav-label">ุงูุชุบุฐูุฉ</span></button>
                    <button class="nav-item" onclick="showSfmSection('inventoryManagement'); hideSfmBottomSheet('sfmsMoreSheet');"><span class="nav-icon">๐ฆ</span><span class="nav-label">ุงููุฎุฒูู</span></button>
                    <button class="nav-item" onclick="showSfmSection('taskManagement'); hideSfmBottomSheet('sfmsMoreSheet');"><span class="nav-icon">๐</span><span class="nav-label">ุงูููุงู</span></button>
                    <button class="nav-item" onclick="showSfmSection('salesPurchases'); hideSfmBottomSheet('sfmsMoreSheet');"><span class="nav-icon">๐ธ</span><span class="nav-label">ุงููุนุงููุงุช</span></button>
                    <button class="nav-item" onclick="showSfmSection('reports'); hideSfmBottomSheet('sfmsMoreSheet');"><span class="nav-icon">๐</span><span class="nav-label">ุงูุชูุงุฑูุฑ</span></button>
                </div>
            </div>
        </div>

        <div class="overlay" id="sfmsPageOverlay" onclick="hideAllSfmSheets()"></div>

        <div class="modal-overlay" id="formModalOverlay">
            <div class="modal-content-sfms" id="formModalContainer">
                <div class="modal-header-sfms">
                    <h3 id="formModalTitle"></h3>
                    <button class="modal-close-btn-sfms" onclick="closeSfmFormModal()">โ</button>
                </div>
                <div class="modal-body-sfms" id="formModalBody">
                </div>
            </div>
        </div>
    </div>
    <script src="script.js"></script>
    <!-- Enhanced Features -->
    <script src="pdf-export.js"></script>
    <script src="qr-scanner.js"></script>
    <script src="analytics-engine.js"></script>
</body>
</html>
